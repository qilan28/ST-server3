# SillyTavern å¤šå¼€ç®¡ç†å¹³å°

ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„ SillyTavern å¤šå¼€ç®¡ç†å¹³å°ï¼Œå…è®¸ç”¨æˆ·æ³¨å†Œåä½¿ç”¨ç‹¬ç«‹çš„ SillyTavern å®ä¾‹ã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ” **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€JWTè®¤è¯
- ğŸ‘‘ **è§’è‰²æƒé™ç®¡ç†** - åŒºåˆ†ç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ï¼Œç³»ç»Ÿé™åˆ¶åªèƒ½æœ‰ä¸€ä¸ªç®¡ç†å‘˜
- ğŸš€ **å®ä¾‹ç®¡ç†** - å¯åŠ¨ã€åœæ­¢ã€é‡å¯ SillyTavern å®ä¾‹ï¼ˆä»…æ™®é€šç”¨æˆ·ï¼‰
- ğŸ“Š **èµ„æºç›‘æ§** - å®æ—¶æŸ¥çœ‹ CPUã€å†…å­˜ã€è¿è¡Œæ—¶é—´ç­‰
- ğŸ“¦ **ç‰ˆæœ¬ç®¡ç†** - åˆ‡æ¢ç‰ˆæœ¬ã€é‡è£…ä¾èµ–ã€ä¾èµ–æ£€æµ‹
- ğŸ“„ **å®æ—¶æ—¥å¿—** - æŸ¥çœ‹æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯æ—¥å¿—ï¼Œæ”¯æŒè‡ªåŠ¨åˆ·æ–°
- ğŸ”§ **ç®¡ç†å‘˜é¢æ¿** - ç®¡ç†æ‰€æœ‰ç”¨æˆ·ã€å®ä¾‹æ§åˆ¶ã€ç³»ç»Ÿç»Ÿè®¡ï¼ˆç®¡ç†å‘˜ä¸“ç”¨ï¼‰
- ğŸŒ **Nginx åå‘ä»£ç†** - æ”¯æŒè·¯å¾„è½¬å‘ï¼ˆå¦‚ï¼š`/ç”¨æˆ·å/st`ï¼‰ï¼Œç»Ÿä¸€åŸŸåè®¿é—®
- ğŸ”’ **æ•°æ®éš”ç¦»** - æ¯ä¸ªæ™®é€šç”¨æˆ·æ‹¥æœ‰ç‹¬ç«‹çš„æ•°æ®ç›®å½•å’Œ SillyTavern å®ä¾‹
- ğŸ’¾ **æ•°æ®å¤‡ä»½** - æ”¯æŒå°†æ•°æ®å¤‡ä»½åˆ° Hugging Face ä»“åº“ï¼ˆæ–°å¢ï¼‰
- ğŸ¨ **ç°ä»£åŒ–UI** - ç®€æ´ç¾è§‚çš„ç®¡ç†ç•Œé¢
- âš¡ **è‡ªåŠ¨åŒ–éƒ¨ç½²** - åŸºäº PM2 çš„è¿›ç¨‹ç®¡ç†

## ğŸ“‹ æŠ€æœ¯æ ˆ 

### åç«¯
- Node.js + Express
- SQLite (better-sqlite3)
- PM2 (è¿›ç¨‹ç®¡ç†)
- JWT (jsonwebtoken)
- bcrypt (å¯†ç åŠ å¯†)

### å‰ç«¯
- åŸç”Ÿ HTML/CSS/JavaScript
- Fetch API
- å“åº”å¼è®¾è®¡

## âš ï¸ ç³»ç»Ÿè¦æ±‚

- **Node.js >= v20.11.0** (å¿…éœ€)
- **npm >= v10.0.0**
- **Git** (ç”¨äºå…‹éš† SillyTavern)

> **é‡è¦æç¤º**ï¼šå¦‚æœæ‚¨çš„ Node.js ç‰ˆæœ¬ä½äº v20.11.0ï¼Œè¯·å…ˆå‚è€ƒ [NODEJS-UPGRADE.md](./NODEJS-UPGRADE.md) å‡çº§ Node.jsï¼Œå¦åˆ™ä¼šé‡åˆ°è¯­æ³•é”™è¯¯ã€‚

æ£€æŸ¥ç‰ˆæœ¬ï¼š
```bash
node --version  # åº”è¯¥ >= v20.11.0
npm --version   # åº”è¯¥ >= v10.0.0
git --version
```

## ğŸ‘‘ ç®¡ç†å‘˜åŠŸèƒ½

### åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ï¼š

```bash
npm run create-admin
```

æŒ‰ç…§æç¤ºè¾“å…¥ç®¡ç†å‘˜çš„ç”¨æˆ·åã€é‚®ç®±å’Œå¯†ç ã€‚

> **ğŸ“Œ é‡è¦è¯´æ˜**ï¼šç®¡ç†å‘˜è´¦æˆ·ä»…ç”¨äºç®¡ç†ç³»ç»Ÿå’Œå…¶ä»–ç”¨æˆ·ï¼Œä¸ä¼šåˆ›å»º SillyTavern å®ä¾‹ã€‚ç®¡ç†å‘˜ç™»å½•åå°†ç›´æ¥è¿›å…¥ç®¡ç†å‘˜é¢æ¿ã€‚

### ç®¡ç†å‘˜é¢æ¿åŠŸèƒ½

ç®¡ç†å‘˜ç™»å½•åä¼šè‡ªåŠ¨è¿›å…¥ç®¡ç†å‘˜é¢æ¿ï¼ˆå¦‚æœæ‚¨éœ€è¦åŒæ—¶ç®¡ç†å’Œä½¿ç”¨ SillyTavernï¼Œè¯·åˆ›å»ºä¸¤ä¸ªè´¦æˆ·ï¼šä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·å’Œä¸€ä¸ªæ™®é€šç”¨æˆ·è´¦æˆ·ï¼‰ã€‚

**ç®¡ç†å‘˜é¢æ¿åŠŸèƒ½ï¼š**

- **ç³»ç»Ÿç»Ÿè®¡** - æŸ¥çœ‹æ€»ç”¨æˆ·æ•°ã€è¿è¡Œä¸­å®ä¾‹æ•°ã€ç³»ç»Ÿèµ„æºä½¿ç”¨ç­‰
- **ç”¨æˆ·ç®¡ç†** - æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ã€å¯åŠ¨/åœæ­¢ç”¨æˆ·å®ä¾‹
- **è§’è‰²ç®¡ç†** - è®¾ç½®æˆ–å–æ¶ˆç”¨æˆ·çš„ç®¡ç†å‘˜æƒé™
- **ç”¨æˆ·åˆ é™¤** - åˆ é™¤ç”¨æˆ·åŠå…¶æ‰€æœ‰æ•°æ®
- **å®ä¾‹ç›‘æ§** - å®æ—¶æŸ¥çœ‹æ‰€æœ‰å®ä¾‹çš„è¿è¡ŒçŠ¶æ€å’Œèµ„æºä½¿ç”¨

**æƒé™ä¿æŠ¤ï¼š**

- ä¸èƒ½åˆ é™¤è‡ªå·±çš„è´¦æˆ·
- ä¸èƒ½åˆ é™¤æœ€åä¸€ä¸ªç®¡ç†å‘˜
- ä¸èƒ½å–æ¶ˆæœ€åä¸€ä¸ªç®¡ç†å‘˜çš„æƒé™

## ğŸŒ è®¿é—®æ¨¡å¼

æœ¬å¹³å°æ”¯æŒä¸¤ç§è®¿é—®æ¨¡å¼ï¼š

### æ¨¡å¼ 1: ç›´æ¥ç«¯å£è®¿é—®ï¼ˆé»˜è®¤ï¼‰
- ç®¡ç†å¹³å°ï¼š`http://localhost:3000`
- ç”¨æˆ·å®ä¾‹ï¼š`http://localhost:3001`, `http://localhost:3002` ...

### æ¨¡å¼ 2: Nginx è·¯å¾„è½¬å‘ï¼ˆæ¨èï¼‰
- ç®¡ç†å¹³å°ï¼š`http://yourdomain.com`
- ç”¨æˆ·å®ä¾‹ï¼š`http://yourdomain.com/username/st`

**ä¼˜åŠ¿ï¼š** ç»Ÿä¸€åŸŸåã€å•ç«¯å£ã€æ›´å®‰å…¨ã€æ”¯æŒ HTTPS

è¯¦ç»†é…ç½®è¯·å‚è€ƒ [NGINX-SETUP.md](./NGINX-SETUP.md)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` åˆ° `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```env
PORT=3000
JWT_SECRET=your-secret-key-change-this-in-production
NODE_ENV=production
```

**é…ç½® Nginx åå‘ä»£ç†ï¼š**
1. åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼š`npm run create-admin`
2. ç™»å½•ç®¡ç†å‘˜é¢æ¿
3. åœ¨ **âš™ï¸ ç³»ç»Ÿé…ç½®** ä¸­è®¾ç½® Nginx å‚æ•°ï¼š
   - å¯ç”¨ Nginx æ¨¡å¼
   - é…ç½®åŸŸå
   - é…ç½®ç«¯å£
4. ç‚¹å‡» **ç”Ÿæˆ Nginx é…ç½®æ–‡ä»¶**
5. å‚è€ƒ [NGINX-SETUP.md](./NGINX-SETUP.md) å®Œæˆéƒ¨ç½²

> **æ³¨æ„ï¼š** Nginx é…ç½®ç°åœ¨é€šè¿‡ç®¡ç†å‘˜é¢æ¿ç®¡ç†ï¼Œä¸å†ä½¿ç”¨ `.env` æ–‡ä»¶ã€‚

### 3. å¯åŠ¨æœåŠ¡å™¨

```bash
npm start
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 4. è®¿é—®ç®¡ç†å¹³å°

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:3000`

## ğŸ“– ä½¿ç”¨è¯´æ˜

### æ³¨å†Œè´¦å·

1. è®¿é—®é¦–é¡µï¼Œç‚¹å‡»"ç«‹å³æ³¨å†Œ"
2. å¡«å†™ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç 
3. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨ç™»å½•å¹¶åˆ†é…ç«¯å£

### æ•°æ®å¤‡ä»½ï¼ˆæ–°å¢åŠŸèƒ½ï¼‰

ç”¨æˆ·å¯ä»¥å°† SillyTavern æ•°æ®å¤‡ä»½åˆ° Hugging Faceï¼š

1. åœ¨æ§åˆ¶å°æ‰¾åˆ°"ğŸ’¾ æ•°æ®å¤‡ä»½"å¡ç‰‡
2. é…ç½® Hugging Face Token å’Œä»“åº“å
3. æµ‹è¯•è¿æ¥ç¡®ä¿é…ç½®æ­£ç¡®
4. ç‚¹å‡»"ç«‹å³å¤‡ä»½"æ‰§è¡Œå¤‡ä»½

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [HUGGINGFACE-BACKUP.md](./HUGGINGFACE-BACKUP.md)

### é€‰æ‹© SillyTavern ç‰ˆæœ¬

1. é¦–æ¬¡ç™»å½•ä¼šè‡ªåŠ¨è·³è½¬åˆ°ç‰ˆæœ¬é€‰æ‹©é¡µé¢
2. ç³»ç»Ÿè‡ªåŠ¨ä» GitHub è·å–æ‰€æœ‰å¯ç”¨ç‰ˆæœ¬
3. é€‰æ‹©"æ­£å¼ç‰ˆæœ¬"ï¼ˆç¨³å®šï¼‰æˆ–"å¼€å‘åˆ†æ”¯"ï¼ˆæœ€æ–°åŠŸèƒ½ï¼‰
4. ç‚¹å‡»"é€‰æ‹©æ­¤ç‰ˆæœ¬"å¼€å§‹å®‰è£…
5. ç­‰å¾…å…‹éš†ä»“åº“å’Œå®‰è£…ä¾èµ–ï¼ˆçº¦3-5åˆ†é’Ÿï¼‰

### ç®¡ç†å®ä¾‹

1. å®‰è£…å®Œæˆåè‡ªåŠ¨è¿›å…¥æ§åˆ¶å°
2. ç‚¹å‡»"å¯åŠ¨å®ä¾‹"å¯åŠ¨æ‚¨çš„ SillyTavern
3. ä½¿ç”¨æ˜¾ç¤ºçš„è®¿é—®åœ°å€æ‰“å¼€ SillyTavern
4. å¯ä»¥éšæ—¶åœæ­¢æˆ–é‡å¯å®ä¾‹

### æ•°æ®å­˜å‚¨

æ¯ä¸ªç”¨æˆ·çš„æ•°æ®å­˜å‚¨åœ¨ç‹¬ç«‹ç›®å½•ï¼š
```
ST-server/data/ç”¨æˆ·å/
â”œâ”€â”€ sillytavern/        # SillyTavern ä»£ç 
â”‚   â”œâ”€â”€ server.js
â”‚   â”œâ”€â”€ public/
â”‚   â””â”€â”€ ...
â””â”€â”€ st-data/           # SillyTavern æ•°æ®
    â”œâ”€â”€ characters/
    â”œâ”€â”€ chats/
    â”œâ”€â”€ settings.json
    â””â”€â”€ ...
```

## ğŸ”§ é¡¹ç›®ç»“æ„

```
ST-server/
â”œâ”€â”€ database.js              # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ pm2-manager.js          # PM2è¿›ç¨‹ç®¡ç†
â”œâ”€â”€ github-api.js           # GitHub API (è·å–ç‰ˆæœ¬)
â”œâ”€â”€ git-manager.js          # Gitç®¡ç† (clone/update)
â”œâ”€â”€ server.js               # ä¸»æœåŠ¡å™¨
â”œâ”€â”€ setup.js                # åˆå§‹åŒ–è„šæœ¬
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ auth.js            # JWTè®¤è¯ä¸­é—´ä»¶
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js            # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ instance.js        # å®ä¾‹ç®¡ç†è·¯ç”±
â”‚   â””â”€â”€ version.js         # ç‰ˆæœ¬ç®¡ç†è·¯ç”±
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html         # ç™»å½•/æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ dashboard.html     # ç®¡ç†é¢æ¿
â”‚   â”œâ”€â”€ setup.html         # ç‰ˆæœ¬é€‰æ‹©é¡µé¢
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css     # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ auth.js        # è®¤è¯é€»è¾‘
â”‚       â”œâ”€â”€ dashboard.js   # æ§åˆ¶å°é€»è¾‘
â”‚       â””â”€â”€ setup.js       # ç‰ˆæœ¬é€‰æ‹©é€»è¾‘
â”œâ”€â”€ data/                   # ç”¨æˆ·æ•°æ®ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ ç”¨æˆ·å/
â”‚       â”œâ”€â”€ sillytavern/  # STä»£ç 
â”‚       â””â”€â”€ st-data/      # STæ•°æ®
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”œâ”€â”€ database.sqlite        # SQLiteæ•°æ®åº“ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”œâ”€â”€ package.json
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ QUICKSTART.md
```

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### users è¡¨

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | INTEGER | ä¸»é”® |
| username | TEXT | ç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰ |
| password | TEXT | å¯†ç ï¼ˆbcryptåŠ å¯†ï¼‰ |
| email | TEXT | é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| port | INTEGER | åˆ†é…çš„ç«¯å£ï¼ˆ3001-4000ï¼‰ |
| data_dir | TEXT | æ•°æ®ç›®å½•è·¯å¾„ |
| st_dir | TEXT | SillyTavern ä»£ç ç›®å½• |
| st_version | TEXT | SillyTavern ç‰ˆæœ¬ |
| subdomain | TEXT | å­åŸŸåï¼ˆå¯é€‰ï¼‰ |
| status | TEXT | å®ä¾‹çŠ¶æ€ï¼ˆrunning/stoppedï¼‰ |
| st_setup_status | TEXT | STå®‰è£…çŠ¶æ€ï¼ˆpending/installing/completed/failedï¼‰ |
| created_at | DATETIME | åˆ›å»ºæ—¶é—´ |

## ğŸ”Œ API æ¥å£

### è®¤è¯æ¥å£

- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•

### å®ä¾‹ç®¡ç†æ¥å£ï¼ˆéœ€è¦è®¤è¯ï¼‰

- `GET /api/instance/info` - è·å–ç”¨æˆ·ä¿¡æ¯
- `POST /api/instance/start` - å¯åŠ¨å®ä¾‹
- `POST /api/instance/stop` - åœæ­¢å®ä¾‹
- `POST /api/instance/restart` - é‡å¯å®ä¾‹
- `GET /api/instance/status` - è·å–å®ä¾‹çŠ¶æ€
- `GET /api/instance/logs` - è·å–å®ä¾‹æ—¥å¿—ï¼ˆå‚æ•°ï¼štype=out|error, lines=æ•°é‡ï¼‰

### ç‰ˆæœ¬ç®¡ç†æ¥å£

- `GET /api/version/list` - è·å– SillyTavern ç‰ˆæœ¬åˆ—è¡¨ï¼ˆå…¬å¼€ï¼‰
- `GET /api/version/repo-info` - è·å–ä»“åº“ä¿¡æ¯ï¼ˆå…¬å¼€ï¼‰
- `GET /api/version/check-git` - æ£€æŸ¥ Git æ˜¯å¦å¯ç”¨ï¼ˆå…¬å¼€ï¼‰
- `POST /api/version/setup` - å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/version/setup-status` - è·å–å®‰è£…çŠ¶æ€ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `GET /api/version/check-dependencies` - æ£€æŸ¥ä¾èµ–çŠ¶æ€ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/version/reinstall-dependencies` - é‡è£…ä¾èµ–ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/version/delete` - åˆ é™¤å½“å‰ç‰ˆæœ¬ï¼ˆéœ€è¦è®¤è¯ï¼‰
- `POST /api/version/switch` - åˆ‡æ¢ç‰ˆæœ¬ï¼ˆéœ€è¦è®¤è¯ï¼‰

### ç®¡ç†å‘˜æ¥å£ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

- `GET /api/admin/users` - è·å–æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨
- `GET /api/admin/instances` - è·å–æ‰€æœ‰å®ä¾‹çŠ¶æ€
- `GET /api/admin/stats` - è·å–ç³»ç»Ÿç»Ÿè®¡ä¿¡æ¯
- `POST /api/admin/users/:username/start` - å¯åŠ¨æŒ‡å®šç”¨æˆ·çš„å®ä¾‹
- `POST /api/admin/users/:username/stop` - åœæ­¢æŒ‡å®šç”¨æˆ·çš„å®ä¾‹
- `POST /api/admin/users/:username/restart` - é‡å¯æŒ‡å®šç”¨æˆ·çš„å®ä¾‹
- `PUT /api/admin/users/:username/role` - æ›´æ–°ç”¨æˆ·è§’è‰²
- `DELETE /api/admin/users/:username` - åˆ é™¤ç”¨æˆ·ï¼ˆå«æ‰€æœ‰æ•°æ®ï¼‰

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä¿®æ”¹ JWT å¯†é’¥** - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„ `JWT_SECRET`
2. **ä½¿ç”¨ HTTPS** - åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ HTTPSï¼ˆæ¨èé€šè¿‡ Nginx + Let's Encryptï¼‰
3. **ä½¿ç”¨ Nginx åå‘ä»£ç†** - æ¨èä½¿ç”¨ Nginx æ¨¡å¼ï¼Œåªå¯¹å¤–å¼€æ”¾ 80/443 ç«¯å£ï¼Œå†…éƒ¨ç«¯å£ä¸å¯¹å¤–æš´éœ²
4. **é˜²ç«å¢™é…ç½®** - å¦‚ä½¿ç”¨ç›´æ¥ç«¯å£æ¨¡å¼ï¼Œä»…å¼€æ”¾å¿…è¦çš„ç«¯å£ï¼ˆ3000-4000ï¼‰
5. **ä¿æŠ¤ç®¡ç†å‘˜è´¦æˆ·** - ä½¿ç”¨å¼ºå¯†ç ï¼Œè‡³å°‘åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ä½œä¸ºå¤‡ä»½
6. **å®šæœŸå¤‡ä»½** - å®šæœŸå¤‡ä»½ `database.sqlite` å’Œ `data/` ç›®å½•
7. **é™åˆ¶æ³¨å†Œ** - æ ¹æ®éœ€è¦æ·»åŠ æ³¨å†Œé™åˆ¶ï¼ˆå¦‚é‚®ç®±éªŒè¯ã€é‚€è¯·ç ç­‰ï¼‰
8. **å®‰è£… Git** - æœåŠ¡å™¨éœ€è¦å®‰è£… Git æ‰èƒ½å…‹éš† SillyTavern ä»“åº“
9. **ç£ç›˜ç©ºé—´** - ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼ˆæ¯ä¸ªç”¨æˆ·çº¦ 500MB-1GBï¼‰
10. **æƒé™å®¡è®¡** - å®šæœŸæ£€æŸ¥ç®¡ç†å‘˜è´¦æˆ·åˆ—è¡¨ï¼Œç¡®ä¿åªæœ‰æˆæƒäººå‘˜æ‹¥æœ‰ç®¡ç†å‘˜æƒé™

## ğŸ“ å¼€å‘

### å¼€å‘æ¨¡å¼è¿è¡Œ

```bash
npm run dev
```

### æŸ¥çœ‹ PM2 è¿›ç¨‹

```bash
pm2 list
pm2 logs
```

### åœæ­¢æ‰€æœ‰å®ä¾‹

```bash
pm2 stop all
pm2 delete all
```

### é‡ç½® PM2ï¼ˆè§£å†³è¿æ¥é—®é¢˜ï¼‰

å¦‚æœé‡åˆ° PM2 è¿æ¥é”™è¯¯ï¼š

```bash
npm run reset-pm2
```

è¿™ä¼šè‡ªåŠ¨æ¸…ç†æ‰€æœ‰ PM2 è¿›ç¨‹å’Œå®ˆæŠ¤è¿›ç¨‹ã€‚

## ğŸ› å¸¸è§é—®é¢˜

### Q: è®¿é—®ç”¨æˆ·å®ä¾‹æ˜¾ç¤º ERR_EMPTY_RESPONSEï¼Ÿ
A: 
è¿™æ˜¯æœ€å¸¸è§çš„é—®é¢˜ï¼Œé€šå¸¸æ˜¯å› ä¸º**ç”¨æˆ·å®ä¾‹æœªå¯åŠ¨**ã€‚

**å¿«é€Ÿè§£å†³ï¼š**
1. ç™»å½•ç®¡ç†å‘˜é¢æ¿æ£€æŸ¥ç”¨æˆ·çŠ¶æ€
2. å¦‚æœæ˜¾ç¤ºâ€œå·²åœæ­¢â€ï¼Œç‚¹å‡»å¯åŠ¨æŒ‰é’®
3. å¦‚æœå®ä¾‹å·²è¿è¡Œï¼Œè¿è¡Œ `npm run deploy-nginx` éƒ¨ç½²é…ç½®

è¯¦ç»†è§£å†³æ–¹æ¡ˆè¯·æŸ¥çœ‹ **[QUICK-FIX.md](./QUICK-FIX.md)**

### Q: è®¿é—®ç”¨æˆ·å®ä¾‹å‡ºç° 400 Bad Request é”™è¯¯ï¼Ÿ
A: 
å¦‚æœå‡ºç°â€œThe plain HTTP request was sent to HTTPS portâ€é”™è¯¯ï¼Œæˆ–â€œproxy_pass_request_headers directive is duplicateâ€é”™è¯¯ï¼Œè¯·è¯•è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

**å¿«é€Ÿè§£å†³ï¼š**
1. è¿è¡Œ `npm run fix-nginx-duplicate` ä¿®å¤é‡å¤æŒ‡ä»¤é—®é¢˜
2. è¿è¡Œ `npm run fix-nginx-400` ä¿®å¤ SSL é…ç½®é—®é¢˜
3. é‡å¯ Nginx: `nginx -c /root/ST-server/nginx/nginx.conf`

è¯¦ç»†è§£å†³æ–¹æ¡ˆè¯·æŸ¥çœ‹ **[NGINX-CONFIG-FIX.md](./NGINX-CONFIG-FIX.md)**

### Q: é‡åˆ° "SyntaxError: Unexpected token '?'" é”™è¯¯ï¼Ÿ
A: 
è¿™æ˜¯ **Node.js ç‰ˆæœ¬è¿‡ä½**å¯¼è‡´çš„ã€‚SillyTavern éœ€è¦ Node.js v20.11.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚
1. æ£€æŸ¥å½“å‰ç‰ˆæœ¬ï¼š`node --version`
2. å‚è€ƒ [NODEJS-UPGRADE.md](./NODEJS-UPGRADE.md) å‡çº§ Node.js
3. æ¨èä½¿ç”¨ NVM å®‰è£…ï¼š`curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash && nvm install 20`

### Q: å®ä¾‹å¯åŠ¨å¤±è´¥ï¼Ÿ
A: 
1. æ£€æŸ¥æ˜¯å¦å·²ç»é€‰æ‹©å¹¶å®‰è£…äº† SillyTavern ç‰ˆæœ¬
2. æŸ¥çœ‹ PM2 æ—¥å¿—ï¼š`pm2 logs`
3. ç¡®è®¤ç«¯å£æœªè¢«å ç”¨

### Q: PM2 è¿æ¥é”™è¯¯ (TypeError: Cannot read properties of null)?
A: 
è¿™æ˜¯ PM2 å®ˆæŠ¤è¿›ç¨‹çŠ¶æ€å¼‚å¸¸å¯¼è‡´çš„ã€‚è¿è¡Œé‡ç½®å‘½ä»¤ï¼š
```bash
npm run reset-pm2
```
ç„¶åé‡å¯æœåŠ¡å™¨å³å¯ã€‚è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [QUICKSTART.md](./QUICKSTART.md) æ•…éšœæ’æŸ¥éƒ¨åˆ†ã€‚

### Q: ç‰ˆæœ¬å®‰è£…å¤±è´¥ï¼Ÿ
A: 
1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å®‰è£…äº† Gitï¼š`git --version`
2. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼ˆéœ€è¦è®¿é—® GitHubï¼‰
3. ç¡®è®¤æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
4. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Q: æ— æ³•åŠ è½½ç‰ˆæœ¬åˆ—è¡¨ï¼Ÿ
A: 
1. æ£€æŸ¥æœåŠ¡å™¨ç½‘ç»œè¿æ¥
2. GitHub API å¯èƒ½è¢«é™æµï¼Œç¨åå†è¯•
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### Q: ç«¯å£å†²çªï¼Ÿ
A: å¹³å°ä½¿ç”¨ç«¯å£ 3000ï¼Œç”¨æˆ·å®ä¾‹ä½¿ç”¨ 3001-4000ï¼Œç¡®ä¿è¿™äº›ç«¯å£æœªè¢«å ç”¨

### Q: æ•°æ®ä¸¢å¤±ï¼Ÿ
A: ç”¨æˆ·æ•°æ®å­˜å‚¨åœ¨ `data/ç”¨æˆ·å/st-data/` ç›®å½•ï¼Œè¯·å®šæœŸå¤‡ä»½

### Q: å®‰è£…é€Ÿåº¦æ…¢ï¼Ÿ
A: é¦–æ¬¡å®‰è£…éœ€è¦ä» GitHub å…‹éš†ä»“åº“å¹¶å®‰è£…ä¾èµ–ï¼Œæ ¹æ®ç½‘ç»œæƒ…å†µå¯èƒ½éœ€è¦ 3-10 åˆ†é’Ÿ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æäº¤ Issueã€‚